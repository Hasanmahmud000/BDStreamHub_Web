<!DOCTYPE html>  
<html lang="en">  
<head>  
  <meta charset="UTF-8" />  
  <meta name="viewport" content="width=device-width, initial-scale=1" />  
  <title>CricStreamZone - Live Matches & Upcoming</title>  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.7.4/lottie.min.js"></script>  
  <style>  
    /* Menu Dropdown */
    .menu-dropdown {  
      position: relative;  
      display: inline-block;  
    }  
    
    .menu-toggle {  
      background: none;  
      border: none;  
      font-size: 22px;  
      color: #0ff;  
      cursor: pointer;  
      padding: 5px;  
      margin-left: 10px;  
    }  
    
    .dropdown-content {  
      display: none;  
      position: absolute;  
      right: 0;  
      top: 30px;  
      background-color: #222;  
      box-shadow: 0 4px 8px rgba(0,0,0,0.7);  
      border-radius: 8px;  
      z-index: 1001;  
      overflow: hidden;  
      min-width: 180px;  
    }  
    
    .dropdown-content a {  
      color: #fff;  
      padding: 10px 16px;  
      display: block;  
      text-decoration: none;  
      font-size: 14px;  
      transition: background 0.3s ease;  
    }  
    
    .dropdown-content a:hover {  
      background-color: #0af;  
    }  
    
    .menu-dropdown:hover .dropdown-content {  
      display: block;  
    }  

    /* Drawer (Side menu) */  
    #drawer {  
      position: fixed;  
      top: 0;  
      left: -600px;  
      width: 320px;  
      height: 100%;  
      background: linear-gradient(135deg, #1a1a2e, #16213e);  
      z-index: 2000;  
      padding: 20px;  
      box-shadow: 2px 0 20px rgba(0, 0, 0, 0.8);  
      transition: left 0.3s ease;  
      overflow-y: auto;  
    }  
    #drawer.open {  
      left: 0;  
    }  
    #drawer h3 {  
      color: #0af;  
      margin-bottom: 20px;  
    }  
    #drawer a {  
      display: block;  
      color: #fff;  
      text-decoration: none;  
      margin-bottom: 12px;  
      padding: 12px 15px;  
      border-radius: 8px;  
      transition: all 0.3s ease;  
      font-weight: 600;  
      background: rgba(255,255,255,0.1);  
      backdrop-filter: blur(10px);  
      border: 1px solid rgba(255,255,255,0.1);  
    }  
    #drawer a:hover {  
      background: #0af;  
      color: #fff;  
      transform: translateX(5px);  
    }  
    #drawerClose {  
      background: none;  
      color: #ccc;  
      border: none;  
      font-size: 22px;  
      position: absolute;  
      top: 10px;  
      right: 15px;  
      cursor: pointer;  
    }  

    /* Live Score Section in Drawer */
    .live-scores {
      background: rgba(0,170,255,0.1);
      border-radius: 10px;
      padding: 15px;
      margin: 20px 0;
      border: 1px solid rgba(0,170,255,0.3);
    }
    .live-scores h4 {
      color: #0af;
      margin-bottom: 10px;
      font-size: 16px;
    }
    .score-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 0;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      font-size: 12px;
    }
    .score-item:last-child {
      border-bottom: none;
    }
    .score-teams {
      font-weight: 600;
    }
    .score-value {
      color: #0af;
      font-weight: bold;
    }

    /* Language Selector */
    .language-selector {
      margin: 15px 0;
      padding: 10px;
      background: rgba(255,255,255,0.1);
      border-radius: 8px;
    }
    .language-selector select {
      width: 100%;
      padding: 8px;
      background: #333;
      color: #fff;
      border: 1px solid #555;
      border-radius: 5px;
    }

    /* Backdrop overlay */  
    #drawerOverlay {  
      display: none;  
      position: fixed;  
      top: 0;  
      left: 0;  
      height: 100%;  
      width: 100%;  
      background: #00000080;  
      z-index: 1500;  
    }  
    #drawerOverlay.show {  
      display: block;  
    }  

    body {  
      margin: 0;  
      background: linear-gradient(135deg, #0c0c0c, #1a1a1a);  
      color: #fff;  
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;  
    }  
    nav {  
      background: linear-gradient(135deg, #1e1e2e, #2d2d44);  
      padding: 12px 20px;  
      display: flex;  
      align-items: center;  
      justify-content: space-between;  
      box-shadow: 0 2px 10px rgba(0,0,0,0.5);  
    }  
    .logo {  
      font-size: 20px;  
      font-weight: bold;  
      color: #0ff;  
      text-shadow: 0 0 10px rgba(0,255,255,0.5);  
    }  
    .search-container {  
      flex: 1;  
      display: flex;  
      justify-content: center;  
      position: relative;  
    }  
    .search-container input {  
      border-radius: 25px;  
      padding: 10px 40px 10px 15px;  
      border: 2px solid #333;  
      outline: none;  
      width: 70%;  
      max-width: 300px;  
      background: rgba(255,255,255,0.1);  
      color: #fff;  
      text-align: center;  
      backdrop-filter: blur(10px);  
      transition: all 0.3s ease;  
    }  
    .search-container input:focus {  
      border-color: #0af;  
      box-shadow: 0 0 15px rgba(0,170,255,0.3);  
    }  
    .search-clear {
      position: absolute;
      right: 20%;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: #888;
      cursor: pointer;
      font-size: 16px;
      display: none;
    }
    .notice {  
      background: linear-gradient(45deg, #ff6b35, #f7931e);  
      color: #000;  
      padding: 10px;  
      font-weight: bold;  
      text-align: center;  
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);  
    }  

    /* Notification System */
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #0af;
      color: white;
      padding: 15px 20px;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
      z-index: 9999;
      transform: translateX(400px);
      transition: transform 0.3s ease;
    }
    .notification.show {
      transform: translateX(0);
    }

    /* Sub-tabs */  
    .sub-tab-btns {  
      padding: 10px;  
      text-align: center;  
      background: rgba(34,34,34,0.9);  
      backdrop-filter: blur(10px);  
      position: sticky;  
      top: 0;  
      z-index: 100;  
    }  
    .sub-tab-btns button {  
      margin: 0 8px;  
      padding: 8px 16px;  
      border: none;  
      border-radius: 20px;  
      background: rgba(255,255,255,0.1);  
      color: #fff;  
      cursor: pointer;  
      font-weight: 600;  
      font-size: 14px;  
      transition: all 0.3s ease;  
      backdrop-filter: blur(10px);  
    }  
    .sub-tab-btns button:hover {  
      background: #0af;  
      transform: translateY(-2px);  
    }  
    .sub-tab-btns .active {  
      background: #0af;  
      box-shadow: 0 4px 15px rgba(0,170,255,0.4);  
    }  

    /* Bottom tabs */  
    .bottom-tab-btns {  
      position: fixed;  
      bottom: 0;  
      width: 100%;  
      background: linear-gradient(135deg, #1e1e2e, #2d2d44);  
      display: flex;  
      justify-content: space-around;  
      padding: 12px 0;  
      box-shadow: 0 -4px 20px rgba(0,0,0,0.8);  
      z-index: 1000;  
    }  
    .bottom-tab-btns button {  
      background: rgba(255,255,255,0.1);  
      border: none;  
      color: #fff;  
      padding: 12px 20px;  
      font-size: 16px;  
      font-weight: 700;  
      border-radius: 15px;  
      cursor: pointer;  
      flex: 1;  
      margin: 0 8px;  
      transition: all 0.3s ease;  
      backdrop-filter: blur(10px);  
    }  
    .bottom-tab-btns button.active {  
      background: #0af;  
      color: #fff;  
      box-shadow: 0 4px 15px rgba(0,170,255,0.4);  
    }  
    .bottom-tab-btns button:hover:not(.active) {  
      background: rgba(255,255,255,0.2);  
      transform: translateY(-2px);  
    }  

    #match-list {  
      padding: 15px 10px 80px;  
    }  

    /* Enhanced Match Card */
    .match {  
      background: linear-gradient(135deg, rgba(26,26,40,0.9), rgba(45,45,68,0.9));  
      border-radius: 16px;  
      padding: 20px;  
      margin-bottom: 20px;  
      box-shadow: 0 8px 25px rgba(0,0,0,0.3);  
      transition: all 0.3s ease;  
      backdrop-filter: blur(10px);  
      border: 1px solid rgba(255,255,255,0.1);  
      position: relative;  
      overflow: hidden;  
    }  
    .match::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, #0af, #00ff88);
    }
    .match:hover {  
      box-shadow: 0 0 30px rgba(0,170,255,0.4);  
      transform: translateY(-5px);  
    }  

    /* Match Header */
    .match-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }
    .match-title {
      font-size: 14px;
      font-weight: 600;
      color: #0af;
      background: rgba(0,170,255,0.1);
      padding: 6px 12px;
      border-radius: 20px;
      flex: 1;
      text-align: center;
    }
    .favorite-btn {
      background: none;
      border: none;
      color: #666;
      font-size: 18px;
      cursor: pointer;
      margin-left: 10px;
      transition: color 0.3s ease;
    }
    .favorite-btn.active {
      color: #ff6b35;
    }

    /* Teams Section */
    .teams-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }
    .team {
      display: flex;
      flex-direction: column;
      align-items: center;
      flex: 1;
    }
    .team img {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      border: 2px solid rgba(255,255,255,0.2);
      margin-bottom: 8px;
    }
    .team-name {
      font-size: 14px;
      font-weight: bold;
      text-align: center;
    }
    .vs-divider {
      font-weight: bold;
      color: #0af;
      font-size: 18px;
      margin: 0 15px;
    }

    /* Match Info */
    .match-info {
      text-align: center;
      margin-bottom: 15px;
    }
    .match-time {  
      font-size: 13px;  
      color: #bbb;  
      margin-bottom: 5px;  
    }  
    .countdown, .started {  
      font-size: 15px;  
      color: #0f0;  
      font-weight: 600;  
    }  

    /* Server Buttons */
    .server-buttons {
      display: flex;
      justify-content: center;
      gap: 8px;
      flex-wrap: wrap;
    }
    .server-buttons a {  
      background: linear-gradient(45deg, #08f, #0af);  
      color: #fff;  
      padding: 8px 15px;  
      text-decoration: none;  
      border-radius: 20px;  
      font-weight: 600;  
      font-size: 13px;  
      transition: all 0.3s ease;  
      box-shadow: 0 2px 10px rgba(0,0,0,0.3);
          }  
    .server-buttons a:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(0,170,255,0.4);
    }

    .liveBlink {  
      display: inline-block;  
      padding: 6px 12px;  
      font-weight: 900;  
      font-size: 11px;  
      color: white;  
      background: linear-gradient(45deg, #ff003c, #ff7700, #ff003c);  
      background-size: 200% 200%;  
      border-radius: 25px;  
      animation: gradientPulse 3s ease infinite, blinkOpacity 1.5s infinite;  
      box-shadow: 0 0 15px #ff003c, 0 0 25px #ff7700;  
      user-select: none;  
      text-transform: uppercase;  
    }  
    @keyframes blinkOpacity {  
      0%, 100% { opacity: 1; }  
      50% { opacity: 0.3; }  
    }  
    @keyframes gradientPulse {  
      0% { background-position: 0% 50%; }  
      50% { background-position: 100% 50%; }  
      100% { background-position: 0% 50%; }  
    }  

    /* Advanced Search Filters */
    .search-filters {
      display: none;
      background: rgba(34,34,34,0.95);
      padding: 15px;
      border-radius: 10px;
      margin: 10px;
      backdrop-filter: blur(10px);
    }
    .filter-row {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
      flex-wrap: wrap;
    }
    .filter-row select, .filter-row input {
      flex: 1;
      padding: 8px;
      background: #333;
      color: #fff;
      border: 1px solid #555;
      border-radius: 5px;
      min-width: 120px;
    }

    /* TV & FM Sections */  
    #tv-section, #fm-section {  
      padding: 20px;  
      font-size: 16px;  
      color: #ccc;  
    }  
    .channel-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }
    .channel-card {
      background: linear-gradient(135deg, rgba(26,26,40,0.9), rgba(45,45,68,0.9));
      border-radius: 12px;
      padding: 15px;
      text-align: center;
      transition: all 0.3s ease;
      border: 1px solid rgba(255,255,255,0.1);
    }
    .channel-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0,170,255,0.3);
    }
    .channel-logo {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      margin: 0 auto 10px;
      background: #333;
    }

    /* Loading Animation */
    .loading {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 200px;
    }
    .spinner {
      width: 40px;
      height: 40px;
      border: 4px solid rgba(0,170,255,0.3);
      border-top: 4px solid #0af;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .teams-container {
        padding: 0 10px;
      }
      .team img {
        width: 35px;
        height: 35px;
      }
      .match {
        margin-bottom: 15px;
        padding: 15px;
      }
      .server-buttons a {
        padding: 6px 12px;
        font-size: 12px;
      }
    }

    /* Dark/Light Theme Toggle */
    .theme-toggle {
      background: none;
      border: none;
      color: #0af;
      font-size: 20px;
      cursor: pointer;
      margin-left: 10px;
    }

    /* Statistics Cards */
    .stats-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 10px;
      margin: 15px 0;
    }
    .stat-card {
      background: rgba(0,170,255,0.1);
      padding: 15px;
      border-radius: 10px;
      text-align: center;
      border: 1px solid rgba(0,170,255,0.3);
    }
    .stat-number {
      font-size: 24px;
      font-weight: bold;
      color: #0af;
    }
    .stat-label {
      font-size: 12px;
      color: #ccc;
    }
  </style>  
</head>  
<body>  

<!-- Notification Container -->
<div id="notificationContainer"></div>

<!-- Drawer / Side Menu -->  
<div id="drawer">  
  <button id="drawerClose" onclick="toggleDrawer()">✕</button>  
  
  <!-- Logo Section -->
  <div style="text-align: center; margin-bottom: 25px; padding-bottom: 20px; border-bottom: 1px solid #333;">
    <img src="https://i.postimg.cc/3rPWWckN/icon-192.png" alt="CricStreamZone Logo" style="width: 80px; height: 80px; border-radius: 50%; margin-bottom: 10px; border: 3px solid #0af;" />
    <div style="color: #0af; font-size: 18px; font-weight: bold;">CricStreamZone</div>
    <div style="color: #888; font-size: 12px;">All Sports Live Streaming</div>
  </div>

  <!-- Live Scores Section -->
  <div class="live-scores">
    <h4>🏏 Live Scores</h4>
    <div id="liveScoresContainer">
      <div class="loading">
        <div class="spinner"></div>
      </div>
    </div>
  </div>

  <!-- Statistics -->
  <div class="stats-container">
    <div class="stat-card">
      <div class="stat-number" id="totalMatches">0</div>
      <div class="stat-label">Total Matches</div>
    </div>
    <div class="stat-card">
      <div class="stat-number" id="liveCount">0</div>
      <div class="stat-label">Live Now</div>
    </div>
  </div>

  <!-- Language Selector -->
  <div class="language-selector">
    <label style="color: #0af; font-size: 14px; margin-bottom: 5px; display: block;">🌐 Language</label>
    <select id="languageSelect" onchange="changeLanguage()">
      <option value="en">English</option>
      <option value="bn">বাংলা</option>
      <option value="hi">हिंदी</option>
      <option value="ur">اردو</option>
    </select>
  </div>
  
  <h3></h3>  
  <a href="https://t.me/CricStreamZone" target="_blank">📣 <span data-translate="join_telegram">Join Telegram</span></a>  
  <a href="https://play.google.com/store/apps/details?id=com.genuine.leone" target="_blank">📲 <span data-translate="download_player">Download NS Player</span></a>  
  <a href="#" onclick="showCategory('live'); toggleDrawer();">🏏 <span data-translate="live_matches">Live Matches</span></a>  
  <a href="#" onclick="showCategory('tv'); toggleDrawer();">📺 <span data-translate="live_tv">Live TV</span></a>  
  <a href="#" onclick="showCategory('fm'); toggleDrawer();">📻 <span data-translate="fm_radio">FM Radio</span></a>  
  <a href="#" onclick="showFavorites(); toggleDrawer();">⭐ <span data-translate="favorites">Favorites</span></a>  
  <a href="#" onclick="showSettings(); toggleDrawer();">⚙️ <span data-translate="settings">Settings</span></a>  
</div>  
<div id="drawerOverlay" onclick="toggleDrawer()"></div>

<nav>  
  <div style="display: flex; align-items: center;">
    <button onclick="toggleDrawer()" class="menu-toggle">☰</button>
    <div class="logo" data-translate="app_name">CricStreamZone</div>
  </div>
  <div class="search-container">  
    <input id="search" type="text" data-translate-placeholder="search_placeholder" placeholder="Search matches or teams" />  
    <button class="search-clear" id="searchClear" onclick="clearSearch()">✕</button>
  </div>
  <div>
    <button class="theme-toggle" onclick="toggleTheme()" title="Toggle Theme">🌙</button>
    <button onclick="toggleSearchFilters()" style="background:none; border:none; color:#0af; font-size:18px; cursor:pointer; margin-left:10px;">🔍</button>
  </div>
</nav>  

<!-- Advanced Search Filters -->
<div id="searchFilters" class="search-filters">
  <div class="filter-row">
    <select id="filterSport">
      <option value="">All Sports</option>
      <option value="cricket">Cricket</option>
      <option value="football">Football</option>
      <option value="tennis">Tennis</option>
    </select>
    <select id="filterStatus">
      <option value="">All Status</option>
      <option value="live">Live</option>
      <option value="upcoming">Upcoming</option>
      <option value="finished">Finished</option>
    </select>
    <input type="date" id="filterDate" />
  </div>
  <div style="text-align: center;">
    <button onclick="applyFilters()" style="background:#0af; color:#fff; border:none; padding:8px 16px; border-radius:5px; cursor:pointer;">Apply Filters</button>
    <button onclick="clearFilters()" style="background:#666; color:#fff; border:none; padding:8px 16px; border-radius:5px; cursor:pointer; margin-left:10px;">Clear</button>
  </div>
</div>
  
<div class="notice">  
  <marquee scrollamount="5"><span data-translate="welcome_message">Welcome To CricStreamZone ! ⚠️ Attention All Users ! For flawless live sports streaming on your mobile device ! please install the NS Player app now !</span></marquee>  
</div>  
  
<!-- Sub-tabs -->  
<div id="subTabs" class="sub-tab-btns" style="display:none;">  
  <button id="subLive" class="active"><span data-translate="live">Live</span> <span id="countLive"></span></button>  
  <button id="subToday"><span data-translate="today">Today</span> <span id="countToday"></span></button>  
  <button id="subUpcoming"><span data-translate="upcoming">Upcoming</span> <span id="countUpcoming"></span></button>  
</div>  
  
<div id="match-list"></div>  
  
<!-- TV Section -->  
<div id="tv-section" style="display:none;">  
  <h2 data-translate="live_tv_channels">Live TV Channels</h2>  
  <div class="channel-grid">
    <div class="channel-card">
      <div class="channel-logo"></div>
      <h4>Star Sports 1</h4>
      <p>Live Cricket & Sports</p>
      <a href="#" style="background:#0af; color:#fff; padding:8px 16px; text-decoration:none; border-radius:5px;">Watch Now</a>
    </div>
    <div class="channel-card">
      <div class="channel-logo"></div>
      <h4>Sony Six</h4>
      <p>Live Sports Channel</p>
      <a href="#" style="background:#0af; color:#fff; padding:8px 16px; text-decoration:none; border-radius:5px;">Watch Now</a>
    </div>
    <!-- Add more channels -->
  </div>
</div>  
  
<!-- FM Section -->  
<div id="fm-section" style="display:none;">  
  <h2 data-translate="fm_radio_stations">FM Radio Stations</h2>  
  <div class="channel-grid">
    <div class="channel-card">
      <div class="channel-logo"></div>
      <h4>Radio Mirchi</h4>
      <p>98.3 FM</p>
      <a href="#" style="background:#0af; color:#fff; padding:8px 16px; text-decoration:none; border-radius:5px;">Listen Now</a>
    </div>
    <div class="channel-card">
      <div class="channel-logo"></div>
      <h4>Red FM</h4>
      <p>93.5 FM</p>
      <a href="#" style="background:#0af; color:#fff; padding:8px 16px; text-decoration:none; border-radius:5px;">Listen Now</a>
    </div>
    <!-- Add more stations -->
  </div>
</div>  
  
<!-- Bottom Tabs -->  
<div class="bottom-tab-btns">  
  <button id="bottomLive" class="active">  
    <img src="https://i.postimg.cc/BvWg87Rd/videocam-24dp-E3-E3-E3-FILL0-wght400-GRAD0-opsz24.png" alt="Live Icon" style="vertical-align: middle; margin-right: 6px;" />  
    <span data-translate="live">Live</span>  
  </button>  
  <button id="bottomTV">  
    <img src="https://i.postimg.cc/K8JDvvxs/live-tv-24dp-E3-E3-E3-FILL0-wght400-GRAD0-opsz24.png" alt="TV Icon" style="vertical-align: middle; margin-right: 6px;" />  
    <span data-translate="tv">TV</span>  
  </button>  
  <button id="bottomFM">  
    <img src="https://i.postimg.cc/YC472jwd/radio-24dp-E3-E3-E3-FILL0-wght400-GRAD0-opsz24.png" alt="FM Icon" style="vertical-align: middle; margin-right: 6px;" />  
    <span data-translate="fm">FM</span>  
  </button>  
</div>  

<!-- Telegram Join Popup -->  
<div id="telegramPopup" style="display:none;">  
  <div style="position:fixed; top:0; left:0; width:100%; height:100%; background:#000000aa; z-index:9999; display:flex; align-items:center; justify-content:center;">  
    <div style="background:linear-gradient(135deg, #1e1e2e, #2d2d44); padding:25px 30px; border-radius:15px; max-width:90%; width:360px; text-align:center; box-shadow:0 0 20px #000; border: 1px solid rgba(0,170,255,0.3);">  
      <h3 style="color:#0af; margin-bottom:15px;">📣 <span data-translate="join_telegram">Join Our Telegram</span></h3>  
      <p style="color:#ccc; font-size:14px; line-height:1.5;"><span data-translate="telegram_description">🔔 For live match updates, instant scores, and exclusive stream links — Join our official Telegram channel now! 📲 Download the NS Player app for smooth, uninterrupted streaming.</span></p>  
      <div style="margin-top:20px;">  
        <a href="https://t.me/CricStreamZone" target="_blank" style="background:linear-gradient(45deg, #08f, #0af); color:#fff; padding:12px 20px; text-decoration:none; border-radius:10px; display:inline-block; font-weight:600; margin-right:10px;"><span data-translate="join_now">Join Now</span></a>  
        <button onclick="closeTelegramPopup()" style="background:#444; color:#ccc; padding:12px 20px; border:none; border-radius:10px; cursor:pointer; font-weight:600;"><span data-translate="later">Later</span></button>  
      </div>  
    </div>  
  </div>  
</div>

<script>  
  // Language translations
  const translations = {
    en: {
      app_name: "CricStreamZone",
      search_placeholder: "Search matches or teams",
      join_telegram: "Join Telegram",
      download_player: "Download NS Player",
      live_matches: "Live Matches",
      live_tv: "Live TV",
      fm_radio: "FM Radio",
      favorites: "Favorites",
      settings: "Settings",
      live: "Live",
      today: "Today",
      upcoming: "Upcoming",
      live_tv_channels: "Live TV Channels",
      fm_radio_stations: "FM Radio Stations",
      welcome_message: "Welcome To CricStreamZone ! ⚠️ Attention All Users ! For flawless live sports streaming on your mobile device ! please install the NS Player app now !",
      join_now: "Join Now",
      later: "Later",
      telegram_description: "🔔 For live match updates, instant scores, and exclusive stream links — Join our official Telegram channel now! 📲 Download the NS Player app for smooth, uninterrupted streaming.",
      no_matches_live: "📴 No live matches at the moment.",
      no_matches_today: "📅 No matches scheduled for today.",
      no_matches_upcoming: "🕒 No upcoming matches found.",
      match_started: "Started",
      time_left: "left",
      coming_soon: "Coming Soon"
    },
    bn: {
      app_name: "ক্রিকস্ট্রিমজোন",
      search_placeholder: "ম্যাচ বা টিম খুঁজুন",
      join_telegram: "টেলিগ্রাম জয়েন করুন",
      download_player: "NS প্লেয়ার ডাউনলোড করুন",
      live_matches: "লাইভ ম্যাচ",
      live_tv: "লাইভ টিভি",
      fm_radio: "এফএম রেডিও",
      favorites: "পছন্দের",
      settings: "সেটিংস",
      live: "লাইভ",
      today: "আজ",
      upcoming: "আসছে",
      live_tv_channels: "লাইভ টিভি চ্যানেল",
      fm_radio_stations: "এফএম রেডিও স্টেশন",
      welcome_message: "ক্রিকস্ট্রিমজোনে স্বাগতম! ⚠️ সকল ব্যবহারকারীদের জন্য! নিরবচ্ছিন্ন লাইভ স্ট্রিমিংয়ের জন্য NS প্লেয়ার অ্যাপ ইনস্টল করুন!",
      join_now: "এখনই যোগ দিন",
      later: "পরে",
      telegram_description: "🔔 লাইভ ম্যাচ আপডেট, তাৎক্ষণিক স্কোর এবং এক্সক্লুসিভ স্ট্রিম লিংকের জন্য — এখনই আমাদের অফিসিয়াল টেলিগ্রাম চ্যানেলে যোগ দিন!",
      no_matches_live: "📴 এই মুহূর্তে কোন লাইভ ম্যাচ নেই।",
      no_matches_today: "📅 আজকের জন্য কোন ম্যাচ নির্ধারিত নেই।",
      no_matches_upcoming: "🕒 কোন আসন্ন ম্যাচ পাওয়া যায়নি।",
      match_started: "শুরু হয়েছে",
      time_left: "বাকি",
      coming_soon: "শীঘ্রই আসছে"
    },
    hi: {
      app_name: "क्रिकस्ट्रीमज़ोन",
      search_placeholder: "मैच या टीम खोजें",
      join_telegram: "टेलीग्राम ज्वाइन करें",
      download_player: "NS प्लेयर डाउनलोड करें",
      live_matches: "लाइव मैच",
      live_tv: "लाइव टीवी",
      fm_radio: "एफएम रेडियो",
      favorites: "पसंदीदा",
      settings: "सेटिंग्स",
      live: "लाइव",
      today: "आज",
      upcoming: "आगामी",
      live_tv_channels: "लाइव टीवी चैनल",
      fm_radio_stations: "एफएम रेडियो स्टेशन",
      welcome_message: "क्रिकस्ट्रीमज़ोन में आपका स्वागत है! ⚠️ सभी उपयोगकर्ताओं का ध्यान! निर्बाध लाइव स्ट्रीमिंग के लिए NS प्लेयर ऐप इंस्टॉल करें!",
      join_now: "अभी ज्वाइन करें",
      later: "बाद में",
      telegram_description: "🔔 लाइव मैच अपडेट, तत्काल स्कोर और एक्सक्लूसिव स्ट्रीम लिंक के लिए — अभी हमारे आधिकारिक टेलीग्राम चैनल से जुड़ें!",
      no_matches_live: "📴 इस समय कोई लाइव मैच नहीं।",
      no_matches_today: "📅 आज के लिए कोई मैच निर्धारित नहीं।",
      no_matches_upcoming: "🕒 कोई आगामी मैच नहीं मिला।",
      match_started: "शुरू हुआ",
      time_left: "बचा",
      coming_soon: "जल्द आ रहा है"
    },
    ur: {
      app_name: "کرک سٹریم زون",
      search_placeholder: "میچ یا ٹیم تلاش کریں",
      join_telegram: "ٹیلیگرام جوائن کریں",
      download_player: "NS پلیئر ڈاؤن لوڈ کریں",
      live_matches: "لائیو میچز",
      live_tv: "لائیو ٹی وی",
      fm_radio: "ایف ایم ریڈیو",
      favorites: "پسندیدہ",
      settings: "سیٹنگز",
      live: "لائیو",
      today: "آج",
      upcoming: "آنے والے",
      live_tv_channels: "لائیو ٹی وی چینلز",
      fm_radio_stations: "ایف ایم ریڈیو سٹیشنز",
      welcome_message: "کرک سٹریم زون میں خوش آمدید! ⚠️ تمام صارفین کی توجہ! بہترین لائیو سٹریمنگ کے لیے NS پلیئر ایپ انسٹال کریں!",
      join_now: "ابھی جوائن کریں",
      later: "بعد میں",
      telegram_description: "🔔 لائیو میچ اپڈیٹس، فوری اسکورز اور خصوصی سٹریم لنکس کے لیے — ابھی ہمارے آفیشل ٹیلیگرام چینل سے جڑیں!",
      no_matches_live: "📴 اس وقت کوئی لائیو میچ نہیں۔",
      no_matches_today: "📅 آج کے لیے کوئی میچ مقرر نہیں۔",
      no_matches_upcoming: "🕒 کوئی آنے والا میچ نہیں ملا۔",
      match_started: "شروع ہوا",
      time_left: "باقی",
      coming_soon: "جلد آ رہا ہے"
    }
  };

  let currentLanguage = localStorage.getItem('selectedLanguage') || 'en';
  
  // Language functions
  function changeLanguage() {
    const select = document.getElementById('languageSelect');
    currentLanguage = select.value;
    localStorage.setItem('selectedLanguage', currentLanguage);
    updateLanguage();
    showNotification(translations[currentLanguage].language_changed || 'Language changed successfully!');
  }

  function updateLanguage() {
    const elements = document.querySelectorAll('[data-translate]');
    elements.forEach(element => {
      const key = element.getAttribute('data-translate');
      if (translations[currentLanguage][key]) {
        element.textContent = translations[currentLanguage][key];
      }
    });

    // Update placeholders
    const placeholderElements = document.querySelectorAll('[data-translate-placeholder]');
    placeholderElements.forEach(element => {
      const key = element.getAttribute('data-translate-placeholder');
      if (translations[currentLanguage][key]) {
        element.placeholder = translations[currentLanguage][key];
      }
    });
  }

  // Notification system
  function showNotification(message, type = 'info', duration = 3000) {
    const container = document.getElementById('notificationContainer');
    const notification = document.createElement('div');
    notification.className = 'notification';
    notification.innerHTML = `
      <div style="display: flex; align-items: center; gap: 10px;">
        <span>${type === 'success' ? '✅' : type === 'error' ? '❌' : 'ℹ️'}</span>
        <span>${message}</span>
      </div>
    `;
    
    container.appendChild(notification);
    
    setTimeout(() => notification.classList.add('show'), 100);
    
    setTimeout(() => {
      notification.classList.remove('show');
      setTimeout(() => container.removeChild(notification), 300);
    }, duration);
  }

  // Favorites system
  let favorites = JSON.parse(localStorage.getItem('favorites')) || [];

  function toggleFavorite(matchId) {
    const index = favorites.indexOf(matchId);
    if (index > -1) {
      favorites.splice(index, 1);
      showNotification('Removed from favorites', 'info');
    } else {
      favorites.push(matchId);
      showNotification('Added to favorites', 'success');
    }
    localStorage.setItem('favorites', JSON.stringify(favorites));
    updateFavoriteButtons();
  }

  function updateFavoriteButtons() {
    const buttons = document.querySelectorAll('.favorite-btn');
    buttons.forEach(btn => {
      const matchId = btn.getAttribute('data-match-id');
      if (favorites.includes(matchId)) {
        btn.classList.add('active');
        btn.innerHTML = '❤️';
      } else {
        btn.classList.remove('active');
        btn.innerHTML = '🤍';
      }
    });
  }

  function showFavorites() {
    if (favorites.length === 0) {
      showNotification('No favorite matches yet!', 'info');
      return;
    }
    
    const favoriteMatches = matches.filter(m => favorites.includes(m.id));
    renderCustomMatches(favoriteMatches, 'Your Favorite Matches');
    showCategory('live');
  }

  // Theme toggle
  let isDarkTheme = localStorage.getItem('theme') !== 'light';

  function toggleTheme() {
    isDarkTheme = !isDarkTheme;
    localStorage.setItem('theme', isDarkTheme ? 'dark' : 'light');
    updateTheme();
  }

  function updateTheme() {
    const body = document.body;
    const themeBtn = document.querySelector('.theme-toggle');
    
    if (isDarkTheme) {
      body.style.background = 'linear-gradient(135deg, #0c0c0c, #1a1a1a)';
      themeBtn.innerHTML = '🌙';
    } else {
      body.style.background = 'linear-gradient(135deg, #f0f0f0, #e0e0e0)';
      body.style.color = '#333';
      themeBtn.innerHTML = '☀️';
    }
  }

  // Search and filter functions
  function toggleSearchFilters() {
    const filters = document.getElementById('searchFilters');
    filters.style.display = filters.style.display === 'none' ? 'block' : 'none';
  }

    function clearSearch() {
    document.getElementById('search').value = '';
    document.getElementById('searchClear').style.display = 'none';
    if (document.getElementById('subTabs').style.display === 'block') {
      renderMatches(currentSubTab);
    }
  }

  function applyFilters() {
    const sport = document.getElementById('filterSport').value;
    const status = document.getElementById('filterStatus').value;
    const date = document.getElementById('filterDate').value;
    
    // Apply filters logic here
    showNotification('Filters applied successfully!', 'success');
    renderMatches(currentSubTab);
  }

  function clearFilters() {
    document.getElementById('filterSport').value = '';
    document.getElementById('filterStatus').value = '';
    document.getElementById('filterDate').value = '';
    showNotification('Filters cleared!', 'info');
    renderMatches(currentSubTab);
  }

  // Drawer toggle function
  function toggleDrawer() {  
    const drawer = document.getElementById('drawer');  
    const overlay = document.getElementById('drawerOverlay');  
    drawer.classList.toggle('open');  
    overlay.classList.toggle('show');  
  }

  // Telegram popup functions
  function closeTelegramPopup() {  
    document.getElementById('telegramPopup').style.display = 'none';  
    localStorage.setItem('hideTelegramPopup', 'true');  
  }  
  
  window.addEventListener('load', () => {  
    const alreadyClosed = localStorage.getItem('hideTelegramPopup');  
    if (!alreadyClosed) {  
      setTimeout(() => {  
        document.getElementById('telegramPopup').style.display = 'block';  
      }, 5000);  
    }
    
    // Initialize language
    document.getElementById('languageSelect').value = currentLanguage;
    updateLanguage();
    updateTheme();
  });

  // API url
  const matchesApi = "https://script.google.com/macros/s/AKfycbxzx4xcwEGidoxEd7BQshkR9FKHjK5o0p8ukNY4NsKNR0EsShY7eV3MUxA2iXz1V8bmHg/exec";  
  
  let matches = [];  
  let intervals = [];  
  let currentSubTab = 'live';
  
  function clearIntervals() {  
    intervals.forEach(i => clearInterval(i));  
    intervals = [];  
  }  
  
  function getNow() { return new Date(); }  
  function getCountdown(t) { return Math.max(0, new Date(t) - getNow()); }  
  function formatCountdown(ms) {  
    let s = Math.floor(ms / 1000), m = Math.floor(s / 60), h = Math.floor(m / 60), d = Math.floor(h / 24);  
    h %= 24; m %= 60; s %= 60;  
    return `${d}d ${h}h ${m}m ${s}s ${translations[currentLanguage].time_left || 'left'}`;  
  }  
  function formatCountUp(ms) {  
    let s = Math.floor(ms / 1000), m = Math.floor(s / 60), h = Math.floor(m / 60);  
    s %= 60; m %= 60;  
    return `${h > 0 ? h + 'h ' : ''}${m}m ${s}s ago`;  
  }

  // Live scores update
  function updateLiveScores() {
    const container = document.getElementById('liveScoresContainer');
    const liveMatches = matches.filter(m => {
      const now = getNow();
      const matchTime = new Date(m.MatchTime);
      return now >= matchTime;
    }).slice(0, 3); // Show only first 3 live matches

    if (liveMatches.length === 0) {
      container.innerHTML = '<div style="text-align:center; color:#888; font-size:12px;">No live matches</div>';
      return;
    }

    container.innerHTML = liveMatches.map(match => `
      <div class="score-item">
        <div class="score-teams">${match.Team1} vs ${match.Team2}</div>
        <div class="score-value">LIVE</div>
      </div>
    `).join('');
  }

  function renderMatches(type = 'live') {  
    clearIntervals();  
    const now = getNow();  
    const todayStart = new Date(now.getFullYear(), now.getMonth(), now.getDate());  
    const todayEnd = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1);  
    
    const list = document.getElementById('match-list');  
    list.innerHTML = "";  
    const filter = document.getElementById('search').value.toLowerCase();  
    
    let filteredMatches = matches.filter(m => {  
      const ct = new Date(m.MatchTime);  
      const isLive = now >= ct;  
      
      if (type === 'live' && !isLive) return false;  
      else if (type === 'today') {  
        if (ct < todayStart || ct >= todayEnd || isLive) return false;  
      }  
      else if (type === 'upcoming') {  
        if (ct < now || (ct >= todayStart && ct < todayEnd)) return false;  
      }  
      
      if (filter && !(m.Match.toLowerCase().includes(filter) || m.Team1.toLowerCase().includes(filter) || m.Team2.toLowerCase().includes(filter))) return false;  
      
      return true;  
    });  
    
    filteredMatches.sort((a, b) => new Date(a.MatchTime) - new Date(b.MatchTime));  
    
    if (filteredMatches.length === 0) {  
      let emojiMessage = '😴 No matches available right now.';  
      if (type === 'live') emojiMessage = translations[currentLanguage].no_matches_live;  
      else if (type === 'upcoming') emojiMessage = translations[currentLanguage].no_matches_upcoming;  
      else if (type === 'today') emojiMessage = translations[currentLanguage].no_matches_today;  
      
      list.innerHTML = `  
        <div style="  
          max-width: 420px;  
          margin: 40px auto;  
          padding: 30px 20px;  
          background: linear-gradient(135deg, rgba(26,26,40,0.9), rgba(45,45,68,0.9));  
          border-radius: 16px;  
          box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);  
          color: #ccc;  
          font-family: 'Segoe UI', sans-serif;  
          font-size: 1.25rem;  
          font-weight: 500;  
          text-align: center;  
          user-select: none;  
          display: flex;  
          align-items: center;  
          justify-content: center;  
          gap: 14px;  
          backdrop-filter: blur(10px);
          border: 1px solid rgba(255,255,255,0.1);
        ">  
          <span style="font-size: 2.5rem;">${emojiMessage.match(/^(\p{Emoji_Presentation}|\p{Extended_Pictographic})+/u)?.[0] || '📱'}</span>  
          <span>${emojiMessage.replace(/^(\p{Emoji_Presentation}|\p{Extended_Pictographic})+\s*/, '')}</span>  
        </div>  
      `;  
      return;  
    }  
    
    filteredMatches.forEach((m, i) => {  
      const ct = new Date(m.MatchTime);  
      const isLive = now >= ct;  
      const matchId = m.id || `${m.Team1}-${m.Team2}-${m.MatchTime}`;
      
      const div = document.createElement('div');  
      div.className = "match";  
      
      let timerHtml = '';  
      if (isLive) {  
        const diffLive = getNow() - ct;  
        timerHtml = `  
          <div style="text-align: center; margin: 10px 0;">  
            <div id="liveAnim${i}" style="width: 50px; height: 50px; margin: 0 auto;"></div>  
            <div class="countdown" id="cd${type}${i}">${translations[currentLanguage].match_started || 'Started'} ${formatCountUp(diffLive)}</div>  
          </div>  
        `;  
      } else {  
        const dateStr = ct.toLocaleDateString('en-GB', { day: '2-digit', month: 'short', year: 'numeric' });  
        const timeStr = ct.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: true });  
        const remainingTime = getCountdown(m.MatchTime);
        timerHtml = `  
          <div class="match-time">${dateStr}</div>  
          <div class="match-time">${timeStr}</div>  
          <div class="countdown" id="cd${type}${i}">⏳ ${formatCountdown(remainingTime)}</div>  
          ${remainingTime <= 15 * 60 * 1000 ? `<div style="color:#ff6b35; font-weight:bold; font-size:12px;">⏳ ${translations[currentLanguage].coming_soon || 'Coming Soon'}...</div>` : ''}  
        `;  
      }  
      
      div.innerHTML = `
        <div class="match-header">
          <div class="match-title">${m.Match}</div>
          <button class="favorite-btn" data-match-id="${matchId}" onclick="toggleFavorite('${matchId}')">🤍</button>
        </div>

        <div class="teams-container">
          <div class="team">
            <img src="${m.Team1Logo}" alt="${m.Team1} logo" loading="lazy" onerror="this.src='https://via.placeholder.com/45x45/333/fff?text=${m.Team1.charAt(0)}'" />
            <div class="team-name">${m.Team1}</div>
          </div>

          <div class="vs-divider">VS</div>

          <div class="team">
            <img src="${m.Team2Logo}" alt="${m.Team2} logo" loading="lazy" onerror="this.src='https://via.placeholder.com/45x45/333/fff?text=${m.Team2.charAt(0)}'" />
            <div class="team-name">${m.Team2}</div>
          </div>
        </div>

        <div class="match-info">
          ${timerHtml}
        </div>

        <div class="server-buttons">
          ${m.servers && m.servers.length > 0 ? 
            m.servers.map((server, index) => {
              const colors = ['#00bcd4', '#009688', '#3f51b5', '#ff5722', '#9c27b0', '#4caf50', '#ff9800', '#e91e63'];
              const bgColor = colors[index % colors.length];
              return `<a href="${server.link}" target="_blank" rel="noopener noreferrer" style="background:${bgColor}; padding:8px 15px; border-radius:20px; color:#fff; text-decoration:none; font-size:13px; margin:3px; transition: all 0.3s ease;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">${server.name}</a>`;
            }).join('') 
            : '<span style="color:#888; font-size:12px;">No servers available</span>'
          }
        </div>
      `;
      
      list.appendChild(div);  
      
      // Initialize Lottie animation for live matches
      if (isLive) {  
        setTimeout(() => {  
          try {
            bodymovin.loadAnimation({  
              container: document.getElementById('liveAnim' + i),  
              renderer: 'svg',  
              loop: true,  
              autoplay: true,  
              path: 'https://raw.githubusercontent.com/Hasanmahmud000/HasanTv/refs/heads/main/live-icon.json'  
            });
          } catch (error) {
            console.log('Lottie animation failed to load');
          }
        }, 100);  
      }  
      
      // Update countdown timers
      if (!isLive) {  
        intervals.push(setInterval(() => {  
          const cdEl = div.querySelector(`#cd${type}${i}`);  
          if (cdEl) {  
            const remain = getCountdown(m.MatchTime);  
            cdEl.innerText = remain > 0 ? `⏳ ${formatCountdown(remain)}` : `${translations[currentLanguage].coming_soon || 'Starting soon'}`;  
          }  
        }, 1000));  
      } else {  
        intervals.push(setInterval(() => {  
          const cdEl = div.querySelector(`#cd${type}${i}`);  
          if (cdEl) {  
            const diffLive = getNow() - ct;  
            cdEl.innerText = `${translations[currentLanguage].match_started || 'Started'} ${formatCountUp(diffLive)}`;  
          }  
        }, 1000));  
      }  
    });

    // Update favorite buttons
    setTimeout(updateFavoriteButtons, 100);
  }

  function renderCustomMatches(matchList, title) {
    clearIntervals();
    const list = document.getElementById('match-list');
    list.innerHTML = `<h2 style="text-align:center; color:#0af; margin:20px 0;">${title}</h2>`;
    
    if (matchList.length === 0) {
      list.innerHTML += '<div style="text-align:center; color:#888; margin:40px 0;">No matches found</div>';
      return;
    }

    matchList.forEach((m, i) => {
      // Similar rendering logic as renderMatches
      const div = document.createElement('div');
      div.className = "match";
      // ... (same match rendering code)
      list.appendChild(div);
    });
  }
  
  // Category management
  function showCategory(category) {  
    document.getElementById('bottomLive').classList.remove('active');  
    document.getElementById('bottomTV').classList.remove('active');  
    document.getElementById('bottomFM').classList.remove('active');  
  
    document.getElementById('bottom' + category.charAt(0).toUpperCase() + category.slice(1)).classList.add('active');  
  
    document.getElementById('search').value = '';  
    document.getElementById('searchClear').style.display = 'none';
  
    document.getElementById('subTabs').style.display = 'none';  
    document.getElementById('match-list').style.display = 'none';  
    document.getElementById('tv-section').style.display = 'none';  
    document.getElementById('fm-section').style.display = 'none';  
  
    if(category === 'live') {  
      document.getElementById('subTabs').style.display = 'block';  
      document.getElementById('match-list').style.display = 'block';  
      currentSubTab = 'live';  
      setActiveSubTab(currentSubTab);  
            renderMatches(currentSubTab);  
    } else if(category === 'tv') {  
      document.getElementById('tv-section').style.display = 'block';  
    } else if(category === 'fm') {  
      document.getElementById('fm-section').style.display = 'block';  
    }  
  }  
  
  // Sub-tab management
  function setActiveSubTab(subTab) {  
    document.getElementById('subLive').classList.remove('active');  
    document.getElementById('subToday').classList.remove('active');  
    document.getElementById('subUpcoming').classList.remove('active');  
    
    document.getElementById('sub' + subTab.charAt(0).toUpperCase() + subTab.slice(1)).classList.add('active');  
  }  
  
  // Event listeners
  document.getElementById('bottomLive').addEventListener('click', () => showCategory('live'));  
  document.getElementById('bottomTV').addEventListener('click', () => showCategory('tv'));  
  document.getElementById('bottomFM').addEventListener('click', () => showCategory('fm'));  
  
  // Sub Tab buttons click  
  document.getElementById('subLive').addEventListener('click', () => {  
    currentSubTab = 'live';  
    setActiveSubTab(currentSubTab);  
    renderMatches(currentSubTab);  
  });  
  
  document.getElementById('subUpcoming').addEventListener('click', () => {  
    currentSubTab = 'upcoming';  
    setActiveSubTab(currentSubTab);  
    renderMatches(currentSubTab);  
  });  
  
  document.getElementById('subToday').addEventListener('click', () => {  
    currentSubTab = 'today';  
    setActiveSubTab(currentSubTab);  
    renderMatches(currentSubTab);  
  });  
  
  // Search functionality
  document.getElementById('search').addEventListener('input', (e) => {  
    const searchClear = document.getElementById('searchClear');
    if (e.target.value.length > 0) {
      searchClear.style.display = 'block';
    } else {
      searchClear.style.display = 'none';
    }
    
    if(document.getElementById('subTabs').style.display === 'block'){  
      renderMatches(currentSubTab);  
    }  
  });

  // Settings function
  function showSettings() {
    const settingsHtml = `
      <div style="padding: 20px; max-width: 400px; margin: 0 auto;">
        <h2 style="color: #0af; text-align: center; margin-bottom: 20px;">⚙️ Settings</h2>
        
        <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
          <h4 style="color: #0af; margin-bottom: 10px;">🌐 Language</h4>
          <select id="settingsLanguage" onchange="changeLanguageFromSettings()" style="width: 100%; padding: 8px; background: #333; color: #fff; border: 1px solid #555; border-radius: 5px;">
            <option value="en">English</option>
            <option value="bn">বাংলা</option>
            <option value="hi">हिंदी</option>
            <option value="ur">اردو</option>
          </select>
        </div>

        <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
          <h4 style="color: #0af; margin-bottom: 10px;">🎨 Theme</h4>
          <button onclick="toggleTheme()" style="width: 100%; padding: 10px; background: #0af; color: #fff; border: none; border-radius: 5px; cursor: pointer;">
            ${isDarkTheme ? '☀️ Switch to Light Theme' : '🌙 Switch to Dark Theme'}
          </button>
        </div>

        <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
          <h4 style="color: #0af; margin-bottom: 10px;">🔔 Notifications</h4>
          <label style="display: flex; align-items: center; gap: 10px; color: #fff;">
            <input type="checkbox" id="notificationToggle" ${localStorage.getItem('notifications') !== 'false' ? 'checked' : ''} onchange="toggleNotifications()">
            Enable Push Notifications
          </label>
        </div>

        <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
          <h4 style="color: #0af; margin-bottom: 10px;">🗑️ Data Management</h4>
          <button onclick="clearAppData()" style="width: 100%; padding: 10px; background: #ff4444; color: #fff; border: none; border-radius: 5px; cursor: pointer; margin-bottom: 10px;">
            Clear All Data
          </button>
          <button onclick="exportFavorites()" style="width: 100%; padding: 10px; background: #44ff44; color: #fff; border: none; border-radius: 5px; cursor: pointer;">
            Export Favorites
          </button>
        </div>

        <div style="text-align: center; margin-top: 20px;">
          <button onclick="showCategory('live')" style="background: #0af; color: #fff; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">
            Back to Matches
          </button>
        </div>
      </div>
    `;
    
    document.getElementById('match-list').innerHTML = settingsHtml;
    document.getElementById('settingsLanguage').value = currentLanguage;
    showCategory('live');
  }

  function changeLanguageFromSettings() {
    const select = document.getElementById('settingsLanguage');
    currentLanguage = select.value;
    localStorage.setItem('selectedLanguage', currentLanguage);
    document.getElementById('languageSelect').value = currentLanguage;
    updateLanguage();
    showNotification('Language updated successfully!', 'success');
  }

  function toggleNotifications() {
    const enabled = document.getElementById('notificationToggle').checked;
    localStorage.setItem('notifications', enabled);
    
    if (enabled && 'Notification' in window) {
      Notification.requestPermission().then(permission => {
        if (permission === 'granted') {
          showNotification('Notifications enabled!', 'success');
        }
      });
    } else {
      showNotification('Notifications disabled!', 'info');
    }
  }

  function clearAppData() {
    if (confirm('Are you sure you want to clear all app data? This will remove favorites, settings, and cache.')) {
      localStorage.clear();
      sessionStorage.clear();
      
      if ('caches' in window) {
        caches.keys().then(names => {
          names.forEach(name => caches.delete(name));
        });
      }
      
      showNotification('All data cleared!', 'success');
      setTimeout(() => window.location.reload(), 1500);
    }
  }

  function exportFavorites() {
    if (favorites.length === 0) {
      showNotification('No favorites to export!', 'info');
      return;
    }
    
    const favoriteMatches = matches.filter(m => favorites.includes(m.id || `${m.Team1}-${m.Team2}-${m.MatchTime}`));
    const exportData = {
      exportDate: new Date().toISOString(),
      favorites: favoriteMatches
    };
    
    const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'cricstreamzone-favorites.json';
    a.click();
    URL.revokeObjectURL(url);
    
    showNotification('Favorites exported successfully!', 'success');
  }

  // Push notification function
  function sendMatchNotification(match) {
    if (localStorage.getItem('notifications') === 'false') return;
    
    if ('Notification' in window && Notification.permission === 'granted') {
      new Notification(`🏏 ${match.Team1} vs ${match.Team2}`, {
        body: `Match starting in 15 minutes!`,
        icon: 'https://i.postimg.cc/3rPWWckN/icon-192.png',
        badge: 'https://i.postimg.cc/3rPWWckN/icon-192.png'
      });
    }
  }

  // Data loading and initialization
  fetch(matchesApi)  
  .then(res => res.json())  
  .then(data => {  
    matches = data.matches || [];  
  
    const now = new Date();  
    const todayStart = new Date(now.getFullYear(), now.getMonth(), now.getDate());  
    const todayEnd = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1);  
  
    // Count matches
    const liveCount = matches.filter(m => new Date(m.MatchTime) <= now).length;  
    const todayCount = matches.filter(m => {  
      const ct = new Date(m.MatchTime);  
      return ct >= todayStart && ct < todayEnd && ct > now;  
    }).length;  
    const upcomingCount = matches.filter(m => new Date(m.MatchTime) > todayEnd).length;  
  
    // Update UI counts
    document.getElementById("countLive").innerText = `(${liveCount})`;  
    document.getElementById("countToday").innerText = `(${todayCount})`;  
    document.getElementById("countUpcoming").innerText = `(${upcomingCount})`;
    
    // Update statistics
    document.getElementById("totalMatches").innerText = matches.length;
    document.getElementById("liveCount").innerText = liveCount;
  
    // Sort matches
    const todayMatches = matches.filter(m => {  
      const ct = new Date(m.MatchTime);  
      return ct >= todayStart && ct < todayEnd && ct > now;  
    });  
  
    const upcomingMatches = matches.filter(m => {  
      const ct = new Date(m.MatchTime);  
      return ct > todayEnd;  
    });  
  
    const liveMatches = matches.filter(m => new Date(m.MatchTime) <= now);  
  
    matches = [  
      ...liveMatches.map(m => ({ ...m, isLive: true })),  
      ...todayMatches.map(m => ({ ...m, isToday: true })),  
      ...upcomingMatches.map(m => ({ ...m, isUpcoming: true })),  
    ];  

    // Add unique IDs to matches
    matches = matches.map((m, index) => ({
      ...m,
      id: m.id || `match-${index}-${m.Team1}-${m.Team2}`
    }));
  
    // Update live scores
    updateLiveScores();
    
    // Set up live scores update interval
    setInterval(updateLiveScores, 30000); // Update every 30 seconds
    
    // Check for upcoming matches for notifications
    matches.forEach(match => {
      const matchTime = new Date(match.MatchTime);
      const timeUntilMatch = matchTime - now;
      
      // Set notification for 15 minutes before match
      if (timeUntilMatch > 0 && timeUntilMatch <= 16 * 60 * 1000) {
        setTimeout(() => sendMatchNotification(match), timeUntilMatch - 15 * 60 * 1000);
      }
    });
  
    showCategory('live');  
  })  
  .catch(e => {  
    console.error('Error fetching matches:', e);  
    document.getElementById('match-list').innerHTML = `
      <div style="text-align:center; color:#f00; padding:40px;">
        <h3>⚠️ Failed to load match data</h3>
        <p>Please check your internet connection and try again.</p>
        <button onclick="window.location.reload()" style="background:#0af; color:#fff; border:none; padding:10px 20px; border-radius:5px; cursor:pointer; margin-top:10px;">
          Retry
        </button>
      </div>
    `;  
  });

  // Service Worker for PWA
  if ('serviceWorker' in navigator) {  
    navigator.serviceWorker.register('sw.js').then(registration => {  
      function showUpdatePopup() {  
        const box = document.createElement('div');  
        box.innerHTML = "🆕 New version available — <b>Tap to update</b>";  
        box.style.cssText = `  
          position: fixed;  
          bottom: 80px;  
          left: 50%;  
          transform: translateX(-50%);  
          background: linear-gradient(45deg, #0af, #08f);  
          color: white;  
          padding: 15px 20px;  
          border-radius: 30px;  
          font-weight: bold;  
          box-shadow: 0 4px 15px rgba(0,170,255,0.4);  
          z-index: 9999;  
          cursor: pointer;  
          animation: bounce 2s infinite;
        `;  
        box.onclick = () => {  
          box.remove();  
          if (registration.waiting) {  
            registration.waiting.postMessage({ action: "skipWaiting" });  
          }  
        };  
        document.body.appendChild(box);  
      }  
  
      function listenForWaitingSW(reg) {  
        if (!reg) return;  
        if (reg.waiting) return showUpdatePopup();  
  
        if (reg.installing) {  
          reg.installing.addEventListener("statechange", function () {  
            if (this.state === "installed" && navigator.serviceWorker.controller) {  
              showUpdatePopup();  
            }  
          });  
        }  
  
        reg.addEventListener("updatefound", () => {  
          if (reg.installing) {  
            reg.installing.addEventListener("statechange", function () {  
              if (this.state === "installed" && navigator.serviceWorker.controller) {  
                showUpdatePopup();  
              }  
            });  
          }  
        });  
      }  
  
      listenForWaitingSW(registration);  
    });  
  
    navigator.serviceWorker.addEventListener("controllerchange", () => {  
      window.location.reload();  
    });  
  }  

  // Touch/Swipe functionality for sub-tabs
  let touchStartX = 0;
  let touchEndX = 0;
  let touchStartY = 0;
  let touchEndY = 0;

  function handleSwipe() {
    const deltaX = touchEndX - touchStartX;
    const deltaY = touchEndY - touchStartY;
    
    if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > 50) {
      if (document.getElementById('subTabs').style.display === 'block') {
        const subTabs = ['live', 'today', 'upcoming'];
        const currentIndex = subTabs.indexOf(currentSubTab);
        
                if (deltaX > 0) {
          // Swipe right - go to previous tab
          if (currentIndex > 0) {
            const newTab = subTabs[currentIndex - 1];
            currentSubTab = newTab;
            setActiveSubTab(currentSubTab);
            renderMatches(currentSubTab);
          }
        } else {
          // Swipe left - go to next tab
          if (currentIndex < subTabs.length - 1) {
            const newTab = subTabs[currentIndex + 1];
            currentSubTab = newTab;
            setActiveSubTab(currentSubTab);
            renderMatches(currentSubTab);
          }
        }
      }
    }
  }

  // Touch event listeners
  document.addEventListener('touchstart', function(e) {
    touchStartX = e.changedTouches[0].screenX;
    touchStartY = e.changedTouches[0].screenY;
  }, { passive: true });

  document.addEventListener('touchend', function(e) {
    touchEndX = e.changedTouches[0].screenX;
    touchEndY = e.changedTouches[0].screenY;
    handleSwipe();
  }, { passive: true });

  // Mouse event listeners for desktop
  let mouseStartX = 0;
  let mouseStartY = 0;
  let isMouseDown = false;

  document.addEventListener('mousedown', function(e) {
    mouseStartX = e.clientX;
    mouseStartY = e.clientY;
    isMouseDown = true;
  });

  document.addEventListener('mouseup', function(e) {
    if (isMouseDown) {
      const deltaX = e.clientX - mouseStartX;
      const deltaY = e.clientY - mouseStartY;
      
      if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > 50) {
        if (document.getElementById('subTabs').style.display === 'block') {
          const subTabs = ['live', 'today', 'upcoming'];
          const currentIndex = subTabs.indexOf(currentSubTab);
          
          if (deltaX > 0) {
            if (currentIndex > 0) {
              const newTab = subTabs[currentIndex - 1];
              currentSubTab = newTab;
              setActiveSubTab(currentSubTab);
              renderMatches(currentSubTab);
            }
          } else {
            if (currentIndex < subTabs.length - 1) {
              const newTab = subTabs[currentIndex + 1];
              currentSubTab = newTab;
              setActiveSubTab(currentSubTab);
              renderMatches(currentSubTab);
            }
          }
        }
      }
      isMouseDown = false;
    }
  });

  document.addEventListener('mouseleave', function() {
    isMouseDown = false;
  });

  // Keyboard shortcuts
  document.addEventListener('keydown', function(e) {
    // Only work when not typing in input fields
    if (e.target.tagName === 'INPUT' || e.target.tagName === 'SELECT') return;
    
    switch(e.key) {
      case '1':
        showCategory('live');
        break;
      case '2':
        showCategory('tv');
        break;
      case '3':
        showCategory('fm');
        break;
      case 'f':
      case 'F':
        document.getElementById('search').focus();
        break;
      case 'Escape':
        if (document.getElementById('drawer').classList.contains('open')) {
          toggleDrawer();
        }
        break;
      case 'ArrowLeft':
        if (document.getElementById('subTabs').style.display === 'block') {
          const subTabs = ['live', 'today', 'upcoming'];
          const currentIndex = subTabs.indexOf(currentSubTab);
          if (currentIndex > 0) {
            const newTab = subTabs[currentIndex - 1];
            currentSubTab = newTab;
            setActiveSubTab(currentSubTab);
            renderMatches(currentSubTab);
          }
        }
        break;
      case 'ArrowRight':
        if (document.getElementById('subTabs').style.display === 'block') {
          const subTabs = ['live', 'today', 'upcoming'];
          const currentIndex = subTabs.indexOf(currentSubTab);
          if (currentIndex < subTabs.length - 1) {
            const newTab = subTabs[currentIndex + 1];
            currentSubTab = newTab;
            setActiveSubTab(currentSubTab);
            renderMatches(currentSubTab);
          }
        }
        break;
    }
  });

  // Auto-refresh functionality
  let autoRefreshInterval;
  
  function startAutoRefresh() {
    // Refresh every 2 minutes
    autoRefreshInterval = setInterval(() => {
      if (document.visibilityState === 'visible') {
        fetch(matchesApi)
          .then(res => res.json())
          .then(data => {
            const newMatches = data.matches || [];
            if (JSON.stringify(newMatches) !== JSON.stringify(matches)) {
              matches = newMatches;
              renderMatches(currentSubTab);
              updateLiveScores();
              showNotification('Match data updated!', 'info', 2000);
            }
          })
          .catch(e => console.log('Auto-refresh failed:', e));
      }
    }, 120000); // 2 minutes
  }

  function stopAutoRefresh() {
    if (autoRefreshInterval) {
      clearInterval(autoRefreshInterval);
    }
  }

  // Page visibility API for auto-refresh
  document.addEventListener('visibilitychange', function() {
    if (document.visibilityState === 'visible') {
      startAutoRefresh();
    } else {
      stopAutoRefresh();
    }
  });

  // Start auto-refresh when page loads
  startAutoRefresh();

  // Performance optimization - Intersection Observer for lazy loading
  const imageObserver = new IntersectionObserver((entries, observer) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const img = entry.target;
        img.src = img.dataset.src;
        img.classList.remove('lazy');
        observer.unobserve(img);
      }
    });
  });

  // Observe all lazy images
  function observeLazyImages() {
    const lazyImages = document.querySelectorAll('img[data-src]');
    lazyImages.forEach(img => imageObserver.observe(img));
  }

  // Call after rendering matches
  setTimeout(observeLazyImages, 1000);

  // Add bounce animation for update notification
  const style = document.createElement('style');
  style.textContent = `
    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% {
        transform: translateX(-50%) translateY(0);
      }
      40% {
        transform: translateX(-50%) translateY(-10px);
      }
      60% {
        transform: translateX(-50%) translateY(-5px);
      }
    }
    
    /* Smooth scrolling */
    html {
      scroll-behavior: smooth;
    }
    
    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
    }
    
    ::-webkit-scrollbar-track {
      background: #1a1a1a;
    }
    
    ::-webkit-scrollbar-thumb {
      background: #0af;
      border-radius: 4px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: #08d;
    }
    
    /* Loading skeleton animation */
    @keyframes skeleton-loading {
      0% {
        background-position: -200px 0;
      }
      100% {
        background-position: calc(200px + 100%) 0;
      }
    }
    
    .skeleton {
      background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
      background-size: 200px 100%;
      animation: skeleton-loading 1.5s infinite;
    }
    
    /* Pulse animation for live indicator */
    @keyframes pulse {
      0% {
        box-shadow: 0 0 0 0 rgba(255, 0, 60, 0.7);
      }
      70% {
        box-shadow: 0 0 0 10px rgba(255, 0, 60, 0);
      }
      100% {
        box-shadow: 0 0 0 0 rgba(255, 0, 60, 0);
      }
    }
    
    .live-pulse {
      animation: pulse 2s infinite;
    }
  `;
  document.head.appendChild(style);

  // Error handling for images
  document.addEventListener('error', function(e) {
    if (e.target.tagName === 'IMG') {
      e.target.src = `https://via.placeholder.com/45x45/333/fff?text=${e.target.alt.charAt(0) || '?'}`;
    }
  }, true);

  // Add install prompt for PWA
  let deferredPrompt;
  
  window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    
    // Show install button in drawer
    const installBtn = document.createElement('a');
    installBtn.innerHTML = '📱 <span data-translate="install_app">Install App</span>';
    installBtn.href = '#';
    installBtn.onclick = (e) => {
      e.preventDefault();
      if (deferredPrompt) {
        deferredPrompt.prompt();
        deferredPrompt.userChoice.then((choiceResult) => {
          if (choiceResult.outcome === 'accepted') {
            showNotification('App installed successfully!', 'success');
          }
          deferredPrompt = null;
        });
      }
    };
    installBtn.style.cssText = `
      display: block;
      color: #fff;
      text-decoration: none;
      margin-bottom: 12px;
      padding: 12px 15px;
      border-radius: 8px;
      transition: all 0.3s ease;
      font-weight: 600;
      background: rgba(0,255,0,0.2);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(0,255,0,0.3);
    `;
    
    const drawer = document.getElementById('drawer');
    const firstLink = drawer.querySelector('a');
    drawer.insertBefore(installBtn, firstLink);
  });

  // Network status indicator
  function updateNetworkStatus() {
    const isOnline = navigator.onLine;
    const indicator = document.getElementById('networkIndicator') || createNetworkIndicator();
    
    if (isOnline) {
      indicator.style.background = '#4caf50';
      indicator.innerHTML = '';
    } else {
      indicator.style.background = '#f44336';
      indicator.innerHTML = '';
    }
  }

  function createNetworkIndicator() {
    const indicator = document.createElement('div');
    indicator.id = 'networkIndicator';
    indicator.style.cssText = `
      position: fixed;
      top: 10px;
      right: 10px;
      padding: 5px 10px;
      border-radius: 15px;
      color: white;
      font-size: 12px;
      font-weight: bold;
      z-index: 10000;
      transition: all 0.3s ease;
    `;
    document.body.appendChild(indicator);
    return indicator;
  }

  window.addEventListener('online', updateNetworkStatus);
  window.addEventListener('offline', updateNetworkStatus);
  updateNetworkStatus();

  // Initialize app
  console.log('🏏 CricStreamZone initialized successfully!');
  console.log('📱 Features: Multi-language, PWA, Live scores, Favorites, Notifications');
  
</script>  

</body>  
</html>
